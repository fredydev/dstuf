# ğŸ§° Accompagnement DevSecOps â€“ POC Nexus v2 pour le projet Pegasus (Equipe MLOps)

## ğŸ“Œ 1. Contexte de lâ€™accompagnement

* **Equipe accompagnÃ©e** : Ã‰quipe MLOps (nom anonymisÃ©)
* **Objectif principal** : Mise en place dâ€™un **POC Nexus v2** pour le projet **Pegasus**, dÃ©ployant des configurations dans plusieurs environnements Appian
* **Technologie concernÃ©e** : Appian (configuration via API), Azure DevOps, pipelines YAML
* **Enjeux secondaires** : ConformitÃ© aux normes Nexus v2, gestion des secrets et des environnements

## ğŸ” 2. Etat initial observÃ©

* Lâ€™Ã©quipe avait dÃ©jÃ  utilisÃ© Nexus v2 sur un autre projet : un **dossier devops existait** contenant les templates de pipeline Nexus
* Environnements Appian dÃ©finis (â€˜certâ€™, â€˜testâ€™, potentiellement â€˜prodâ€™), avec crÃ©ation partielle des environnements Azure DevOps
* IncohÃ©rences de nomenclature : les environnements Azure DevOps ne suivaient pas la rÃ¨gle Nexus v2 (`-dv`, `-cr`, `-pr`, `-prod`)
* Le pipeline utilisait un **paramÃ¨tre `environment`** en build pour sÃ©lectionner dynamiquement le bon Variable Group contenant les credentials d'appel API vers Appian

## ğŸ¦¯ 3. Etapes de lâ€™accompagnement

### 3.1 Initialisation et rÃ©utilisation

* Audit du dossier `devops/` existant et vÃ©rification de la compatibilitÃ© Nexus v2
* Reprise et adaptation des fichiers de CI/CD pour le projet Pegasus
* Identification de la logique de dÃ©ploiement via scripts Bash appelant lâ€™API Appian

### 3.2 Mise en place CI/CD Nexus v2

* Configuration dâ€™un pipeline CI conforme (validation, publication artefacts si applicable)
* Construction du pipeline CD avec appel conditionnel de variables selon lâ€™environnement Appian
* Correction de la nomenclature des environnements Azure DevOps pour respecter les contraintes Nexus v2
* IntÃ©gration du paramÃ¨tre `environment` en build pour permettre la rÃ©solution dynamique des variables sensibles (token, url, etc.)

## âš ï¸ 4. DifficultÃ©s rencontrÃ©es

* âŒ Blocage lors du dÃ©ploiement initial Ã  cause de la **non-conformitÃ© des noms dâ€™environnements** Azure DevOps selon les rÃ¨gles Nexus v2
* âŒ Gestion complexe des `Variable Groups` dynamiques selon lâ€™environnement, nÃ©cessitant des ajustements dans les scripts Bash

## âœ… 5. RÃ©sultats obtenus

* Pipelines CI et CD conformes Ã  Nexus v2
* DÃ©ploiement opÃ©rationnel sur les environnements `-cr` et `-dv`
* RÃ©solution dynamique des secrets Appian selon lâ€™environnement
* Documentation partielle des conventions Nexus rÃ©utilisable pour dâ€™autres projets similaires (Appian/config)

## ğŸ¦ 6. Recommandations pour la suite

* Mettre en place un systÃ¨me de stockage sÃ©curisÃ© pour les credentials Appian (Key Vault ou CyberArk si disponible)
* Uniformiser les modÃ¨les de pipeline pour les futurs projets Appian
* Mettre en place un pipeline de test syntaxique sur les scripts bash appelant Appian
* Si le projet va jusquâ€™en production, vÃ©rifier les politiques de revue et approbation ServiceNow
* Capitaliser sur ce POC pour intÃ©grer dâ€™autres projets similaires MLOps dans Nexus v2
